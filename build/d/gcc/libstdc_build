#!/bin/bash
#*****************************
libstdc_build () {
#*****************************
	export SRCVER=${VERSION:-$(echo gcc-*.tar.?z | rev | cut -f 3- -d . | cut -f 1 -d - | rev)}
	GCCVER=$(echo "$SRCVER" | cut -f 1 -d _)
	export GCCVER

	tar xf gcc-"$SRCVER".tar.?z || exit 1  
	cd gcc-"$SRCVER" || exit 1 
	mkdir -v build
	cd build || exit 1 

	../libstdc++-v3/configure           \
		--host="$SFS_TGT"               \
		--prefix=/tools                 \
		--disable-multilib              \
		--disable-nls                   \
		--disable-libstdcxx-threads     \
		--disable-libstdcxx-pch         \
		--with-gxx-include-dir=/tools/"$SFS_TGT"/include/c++/"$GCCVER" || exit 1

	make || exit 1
	make install || exit 1
	cd ../..
	rm -rf gcc-"$SRCVER"
}

libstdc_build
