#!/bin/bash

build_kernel_source () {
#********************************************************
# remove everything related to building the kernel image
#********************************************************
cd "$SLACKSRC"/k || exit 1
chmod +x kernel-source.SlackBuild
cp -v kernel-source.SlackBuild kernel-source.SlackBuild.old
sed -i -e "55,92d;111,113d;140,181d" kernel-source.SlackBuild && ./kernel-source.SlackBuild 
upgradepkg --install-new --reinstall /tmp/kernel-source*.txz && mv -v /tmp/kernel-source*.txz /slackware64/k
rm -rf /tmp/package-kernel-source/
mv kernel-source.SlackBuild.old kernel-source.SlackBuild
}
build_kernel_source
