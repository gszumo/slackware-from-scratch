#!/bin/bash

build_plasma-extra () {
#********************************************************
cd /source/kde/kde || exit 1

export UPGRADE_PACKAGES=always

for package in \
	sddm \
	kpeoplevcard \
	pulseaudio-qt \
	latte-dock \
	oxygen-fonts \
	plasma-wayland-protocols \
	wacomtablet \
  ; do
   	if ! ./kde.SlackBuild plasma-extra:$package; then
		touch /tmp/kde_build/$package.failed && exit 1
	fi
done

if ! ./kde.SlackBuild applications:libktorrent; then
	touch /tmp/kde_build/libktorrent.failed && exit 1
fi

# Keep MIME database current:
/usr/bin/update-mime-database /usr/share/mime 1>/dev/null 2>/dev/null &

cd /source/kde/kcm-fcitx || exit 1
chmod +x kcm-fcitx.SlackBuild
if ! ./kcm-fcitx.SlackBuild; then
	touch /tmp/kde_build/kcm-fcitx.failed && exit 1
fi

mv -v /tmp/kcm-fcitx*.txz /slackware64/kde
mv -v /tmp/kde_build/*.txz /slackware64/kde
cd /tmp || exit 1
rm ./*
rm -rf /tmp/./*
cd /scripts || exit 1
}

build_plasma-extra
