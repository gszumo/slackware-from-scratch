#!/bin/bash

build_kernel-headers () {
#********************************************************
# remove everything related to .config and PRINT_PACKAGE_NAME
#********************************************************
cd "$SLACKSRC"/k || exit 1
chmod +x kernel-headers.SlackBuild
cp -v kernel-headers.SlackBuild kernel-headers.SlackBuild.old
sed -i -e "45,47d;57,64d" kernel-headers.SlackBuild && ./kernel-headers.SlackBuild 
upgradepkg --install-new --reinstall /tmp/kernel-headers*.txz && mv -v /tmp/kernel-headers*.txz /slackware64/d
rm -rf /tmp/package-kernel-headers/
mv kernel-headers.SlackBuild.old kernel-headers.SlackBuild
}
build_kernel-headers
