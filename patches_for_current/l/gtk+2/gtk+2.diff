diff -aurN gtk+-2.24.32/config.sub gtk+-2.24.32-new/config.sub
--- gtk+-2.24.32/config.sub	2020-11-23 18:15:00.831472220 +0100
+++ gtk+-2.24.32-new/config.sub	2020-11-23 08:33:24.270480587 +0100
@@ -2,7 +2,7 @@
 # Configuration validation subroutine script.
 #   Copyright 1992-2020 Free Software Foundation, Inc.
 
-timestamp='2020-11-07'
+timestamp='2020-01-01'
 
 # This file is free software; you can redistribute it and/or modify it
 # under the terms of the GNU General Public License as published by
@@ -50,7 +50,7 @@
 #	CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM
 # It is wrong to echo any other type of specification.
 
-me=$(echo "$0" | sed -e 's,.*/,,')
+me=`echo "$0" | sed -e 's,.*/,,'`
 
 usage="\
 Usage: $0 [OPTION] CPU-MFR-OPSYS or ALIAS
@@ -124,27 +124,28 @@
 		;;
 	*-*-*-*)
 		basic_machine=$field1-$field2
-		basic_os=$field3-$field4
+		os=$field3-$field4
 		;;
 	*-*-*)
 		# Ambiguous whether COMPANY is present, or skipped and KERNEL-OS is two
 		# parts
 		maybe_os=$field2-$field3
 		case $maybe_os in
-			nto-qnx* | linux-* | uclinux-uclibc* \
+			nto-qnx* | linux-gnu* | linux-android* | linux-dietlibc \
+			| linux-newlib* | linux-musl* | linux-uclibc* | uclinux-uclibc* \
 			| uclinux-gnu* | kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* \
 			| netbsd*-eabi* | kopensolaris*-gnu* | cloudabi*-eabi* \
 			| storm-chaos* | os2-emx* | rtmk-nova*)
 				basic_machine=$field1
-				basic_os=$maybe_os
+				os=$maybe_os
 				;;
 			android-linux)
 				basic_machine=$field1-unknown
-				basic_os=linux-android
+				os=linux-android
 				;;
 			*)
 				basic_machine=$field1-$field2
-				basic_os=$field3
+				os=$field3
 				;;
 		esac
 		;;
@@ -153,7 +154,7 @@
 		case $field1-$field2 in
 			decstation-3100)
 				basic_machine=mips-dec
-				basic_os=
+				os=
 				;;
 			*-*)
 				# Second component is usually, but not always the OS
@@ -161,7 +162,7 @@
 					# Prevent following clause from handling this valid os
 					sun*os*)
 						basic_machine=$field1
-						basic_os=$field2
+						os=$field2
 						;;
 					# Manufacturers
 					dec* | mips* | sequent* | encore* | pc533* | sgi* | sony* \
@@ -174,11 +175,11 @@
 					| microblaze* | sim | cisco \
 					| oki | wec | wrs | winbond)
 						basic_machine=$field1-$field2
-						basic_os=
+						os=
 						;;
 					*)
 						basic_machine=$field1
-						basic_os=$field2
+						os=$field2
 						;;
 				esac
 			;;
@@ -190,451 +191,447 @@
 		case $field1 in
 			386bsd)
 				basic_machine=i386-pc
-				basic_os=bsd
+				os=bsd
 				;;
 			a29khif)
 				basic_machine=a29k-amd
-				basic_os=udi
+				os=udi
 				;;
 			adobe68k)
 				basic_machine=m68010-adobe
-				basic_os=scout
+				os=scout
 				;;
 			alliant)
 				basic_machine=fx80-alliant
-				basic_os=
+				os=
 				;;
 			altos | altos3068)
 				basic_machine=m68k-altos
-				basic_os=
+				os=
 				;;
 			am29k)
 				basic_machine=a29k-none
-				basic_os=bsd
+				os=bsd
 				;;
 			amdahl)
 				basic_machine=580-amdahl
-				basic_os=sysv
+				os=sysv
 				;;
 			amiga)
 				basic_machine=m68k-unknown
-				basic_os=
+				os=
 				;;
 			amigaos | amigados)
 				basic_machine=m68k-unknown
-				basic_os=amigaos
+				os=amigaos
 				;;
 			amigaunix | amix)
 				basic_machine=m68k-unknown
-				basic_os=sysv4
+				os=sysv4
 				;;
 			apollo68)
 				basic_machine=m68k-apollo
-				basic_os=sysv
+				os=sysv
 				;;
 			apollo68bsd)
 				basic_machine=m68k-apollo
-				basic_os=bsd
+				os=bsd
 				;;
 			aros)
 				basic_machine=i386-pc
-				basic_os=aros
+				os=aros
 				;;
 			aux)
 				basic_machine=m68k-apple
-				basic_os=aux
+				os=aux
 				;;
 			balance)
 				basic_machine=ns32k-sequent
-				basic_os=dynix
+				os=dynix
 				;;
 			blackfin)
 				basic_machine=bfin-unknown
-				basic_os=linux
+				os=linux
 				;;
 			cegcc)
 				basic_machine=arm-unknown
-				basic_os=cegcc
+				os=cegcc
 				;;
 			convex-c1)
 				basic_machine=c1-convex
-				basic_os=bsd
+				os=bsd
 				;;
 			convex-c2)
 				basic_machine=c2-convex
-				basic_os=bsd
+				os=bsd
 				;;
 			convex-c32)
 				basic_machine=c32-convex
-				basic_os=bsd
+				os=bsd
 				;;
 			convex-c34)
 				basic_machine=c34-convex
-				basic_os=bsd
+				os=bsd
 				;;
 			convex-c38)
 				basic_machine=c38-convex
-				basic_os=bsd
+				os=bsd
 				;;
 			cray)
 				basic_machine=j90-cray
-				basic_os=unicos
+				os=unicos
 				;;
 			crds | unos)
 				basic_machine=m68k-crds
-				basic_os=
+				os=
 				;;
 			da30)
 				basic_machine=m68k-da30
-				basic_os=
+				os=
 				;;
 			decstation | pmax | pmin | dec3100 | decstatn)
 				basic_machine=mips-dec
-				basic_os=
+				os=
 				;;
 			delta88)
 				basic_machine=m88k-motorola
-				basic_os=sysv3
+				os=sysv3
 				;;
 			dicos)
 				basic_machine=i686-pc
-				basic_os=dicos
+				os=dicos
 				;;
 			djgpp)
 				basic_machine=i586-pc
-				basic_os=msdosdjgpp
+				os=msdosdjgpp
 				;;
 			ebmon29k)
 				basic_machine=a29k-amd
-				basic_os=ebmon
+				os=ebmon
 				;;
 			es1800 | OSE68k | ose68k | ose | OSE)
 				basic_machine=m68k-ericsson
-				basic_os=ose
+				os=ose
 				;;
 			gmicro)
 				basic_machine=tron-gmicro
-				basic_os=sysv
+				os=sysv
 				;;
 			go32)
 				basic_machine=i386-pc
-				basic_os=go32
+				os=go32
 				;;
 			h8300hms)
 				basic_machine=h8300-hitachi
-				basic_os=hms
+				os=hms
 				;;
 			h8300xray)
 				basic_machine=h8300-hitachi
-				basic_os=xray
+				os=xray
 				;;
 			h8500hms)
 				basic_machine=h8500-hitachi
-				basic_os=hms
+				os=hms
 				;;
 			harris)
 				basic_machine=m88k-harris
-				basic_os=sysv3
+				os=sysv3
 				;;
 			hp300 | hp300hpux)
 				basic_machine=m68k-hp
-				basic_os=hpux
+				os=hpux
 				;;
 			hp300bsd)
 				basic_machine=m68k-hp
-				basic_os=bsd
+				os=bsd
 				;;
 			hppaosf)
 				basic_machine=hppa1.1-hp
-				basic_os=osf
+				os=osf
 				;;
 			hppro)
 				basic_machine=hppa1.1-hp
-				basic_os=proelf
+				os=proelf
 				;;
 			i386mach)
 				basic_machine=i386-mach
-				basic_os=mach
+				os=mach
 				;;
 			isi68 | isi)
 				basic_machine=m68k-isi
-				basic_os=sysv
+				os=sysv
 				;;
 			m68knommu)
 				basic_machine=m68k-unknown
-				basic_os=linux
+				os=linux
 				;;
 			magnum | m3230)
 				basic_machine=mips-mips
-				basic_os=sysv
+				os=sysv
 				;;
 			merlin)
 				basic_machine=ns32k-utek
-				basic_os=sysv
+				os=sysv
 				;;
 			mingw64)
 				basic_machine=x86_64-pc
-				basic_os=mingw64
+				os=mingw64
 				;;
 			mingw32)
 				basic_machine=i686-pc
-				basic_os=mingw32
+				os=mingw32
 				;;
 			mingw32ce)
 				basic_machine=arm-unknown
-				basic_os=mingw32ce
+				os=mingw32ce
 				;;
 			monitor)
 				basic_machine=m68k-rom68k
-				basic_os=coff
+				os=coff
 				;;
 			morphos)
 				basic_machine=powerpc-unknown
-				basic_os=morphos
+				os=morphos
 				;;
 			moxiebox)
 				basic_machine=moxie-unknown
-				basic_os=moxiebox
+				os=moxiebox
 				;;
 			msdos)
 				basic_machine=i386-pc
-				basic_os=msdos
+				os=msdos
 				;;
 			msys)
 				basic_machine=i686-pc
-				basic_os=msys
+				os=msys
 				;;
 			mvs)
 				basic_machine=i370-ibm
-				basic_os=mvs
+				os=mvs
 				;;
 			nacl)
 				basic_machine=le32-unknown
-				basic_os=nacl
+				os=nacl
 				;;
 			ncr3000)
 				basic_machine=i486-ncr
-				basic_os=sysv4
+				os=sysv4
 				;;
 			netbsd386)
 				basic_machine=i386-pc
-				basic_os=netbsd
+				os=netbsd
 				;;
 			netwinder)
 				basic_machine=armv4l-rebel
-				basic_os=linux
+				os=linux
 				;;
 			news | news700 | news800 | news900)
 				basic_machine=m68k-sony
-				basic_os=newsos
+				os=newsos
 				;;
 			news1000)
 				basic_machine=m68030-sony
-				basic_os=newsos
+				os=newsos
 				;;
 			necv70)
 				basic_machine=v70-nec
-				basic_os=sysv
+				os=sysv
 				;;
 			nh3000)
 				basic_machine=m68k-harris
-				basic_os=cxux
+				os=cxux
 				;;
 			nh[45]000)
 				basic_machine=m88k-harris
-				basic_os=cxux
+				os=cxux
 				;;
 			nindy960)
 				basic_machine=i960-intel
-				basic_os=nindy
+				os=nindy
 				;;
 			mon960)
 				basic_machine=i960-intel
-				basic_os=mon960
+				os=mon960
 				;;
 			nonstopux)
 				basic_machine=mips-compaq
-				basic_os=nonstopux
+				os=nonstopux
 				;;
 			os400)
 				basic_machine=powerpc-ibm
-				basic_os=os400
+				os=os400
 				;;
 			OSE68000 | ose68000)
 				basic_machine=m68000-ericsson
-				basic_os=ose
+				os=ose
 				;;
 			os68k)
 				basic_machine=m68k-none
-				basic_os=os68k
+				os=os68k
 				;;
 			paragon)
 				basic_machine=i860-intel
-				basic_os=osf
+				os=osf
 				;;
 			parisc)
 				basic_machine=hppa-unknown
-				basic_os=linux
-				;;
-			psp)
-				basic_machine=mipsallegrexel-sony
-				basic_os=psp
+				os=linux
 				;;
 			pw32)
 				basic_machine=i586-unknown
-				basic_os=pw32
+				os=pw32
 				;;
 			rdos | rdos64)
 				basic_machine=x86_64-pc
-				basic_os=rdos
+				os=rdos
 				;;
 			rdos32)
 				basic_machine=i386-pc
-				basic_os=rdos
+				os=rdos
 				;;
 			rom68k)
 				basic_machine=m68k-rom68k
-				basic_os=coff
+				os=coff
 				;;
 			sa29200)
 				basic_machine=a29k-amd
-				basic_os=udi
+				os=udi
 				;;
 			sei)
 				basic_machine=mips-sei
-				basic_os=seiux
+				os=seiux
 				;;
 			sequent)
 				basic_machine=i386-sequent
-				basic_os=
+				os=
 				;;
 			sps7)
 				basic_machine=m68k-bull
-				basic_os=sysv2
+				os=sysv2
 				;;
 			st2000)
 				basic_machine=m68k-tandem
-				basic_os=
+				os=
 				;;
 			stratus)
 				basic_machine=i860-stratus
-				basic_os=sysv4
+				os=sysv4
 				;;
 			sun2)
 				basic_machine=m68000-sun
-				basic_os=
+				os=
 				;;
 			sun2os3)
 				basic_machine=m68000-sun
-				basic_os=sunos3
+				os=sunos3
 				;;
 			sun2os4)
 				basic_machine=m68000-sun
-				basic_os=sunos4
+				os=sunos4
 				;;
 			sun3)
 				basic_machine=m68k-sun
-				basic_os=
+				os=
 				;;
 			sun3os3)
 				basic_machine=m68k-sun
-				basic_os=sunos3
+				os=sunos3
 				;;
 			sun3os4)
 				basic_machine=m68k-sun
-				basic_os=sunos4
+				os=sunos4
 				;;
 			sun4)
 				basic_machine=sparc-sun
-				basic_os=
+				os=
 				;;
 			sun4os3)
 				basic_machine=sparc-sun
-				basic_os=sunos3
+				os=sunos3
 				;;
 			sun4os4)
 				basic_machine=sparc-sun
-				basic_os=sunos4
+				os=sunos4
 				;;
 			sun4sol2)
 				basic_machine=sparc-sun
-				basic_os=solaris2
+				os=solaris2
 				;;
 			sun386 | sun386i | roadrunner)
 				basic_machine=i386-sun
-				basic_os=
+				os=
 				;;
 			sv1)
 				basic_machine=sv1-cray
-				basic_os=unicos
+				os=unicos
 				;;
 			symmetry)
 				basic_machine=i386-sequent
-				basic_os=dynix
+				os=dynix
 				;;
 			t3e)
 				basic_machine=alphaev5-cray
-				basic_os=unicos
+				os=unicos
 				;;
 			t90)
 				basic_machine=t90-cray
-				basic_os=unicos
+				os=unicos
 				;;
 			toad1)
 				basic_machine=pdp10-xkl
-				basic_os=tops20
+				os=tops20
 				;;
 			tpf)
 				basic_machine=s390x-ibm
-				basic_os=tpf
+				os=tpf
 				;;
 			udi29k)
 				basic_machine=a29k-amd
-				basic_os=udi
+				os=udi
 				;;
 			ultra3)
 				basic_machine=a29k-nyu
-				basic_os=sym1
+				os=sym1
 				;;
 			v810 | necv810)
 				basic_machine=v810-nec
-				basic_os=none
+				os=none
 				;;
 			vaxv)
 				basic_machine=vax-dec
-				basic_os=sysv
+				os=sysv
 				;;
 			vms)
 				basic_machine=vax-dec
-				basic_os=vms
+				os=vms
 				;;
 			vsta)
 				basic_machine=i386-pc
-				basic_os=vsta
+				os=vsta
 				;;
 			vxworks960)
 				basic_machine=i960-wrs
-				basic_os=vxworks
+				os=vxworks
 				;;
 			vxworks68)
 				basic_machine=m68k-wrs
-				basic_os=vxworks
+				os=vxworks
 				;;
 			vxworks29k)
 				basic_machine=a29k-wrs
-				basic_os=vxworks
+				os=vxworks
 				;;
 			xbox)
 				basic_machine=i686-pc
-				basic_os=mingw32
+				os=mingw32
 				;;
 			ymp)
 				basic_machine=ymp-cray
-				basic_os=unicos
+				os=unicos
 				;;
 			*)
 				basic_machine=$1
-				basic_os=
+				os=
 				;;
 		esac
 		;;
@@ -686,17 +683,17 @@
 	bluegene*)
 		cpu=powerpc
 		vendor=ibm
-		basic_os=cnk
+		os=cnk
 		;;
 	decsystem10* | dec10*)
 		cpu=pdp10
 		vendor=dec
-		basic_os=tops10
+		os=tops10
 		;;
 	decsystem20* | dec20*)
 		cpu=pdp10
 		vendor=dec
-		basic_os=tops20
+		os=tops20
 		;;
 	delta | 3300 | motorola-3300 | motorola-delta \
 	      | 3300-motorola | delta-motorola)
@@ -706,7 +703,7 @@
 	dpx2*)
 		cpu=m68k
 		vendor=bull
-		basic_os=sysv3
+		os=sysv3
 		;;
 	encore | umax | mmax)
 		cpu=ns32k
@@ -715,7 +712,7 @@
 	elxsi)
 		cpu=elxsi
 		vendor=elxsi
-		basic_os=${basic_os:-bsd}
+		os=${os:-bsd}
 		;;
 	fx2800)
 		cpu=i860
@@ -728,7 +725,7 @@
 	h3050r* | hiux*)
 		cpu=hppa1.1
 		vendor=hitachi
-		basic_os=hiuxwe2
+		os=hiuxwe2
 		;;
 	hp3k9[0-9][0-9] | hp9[0-9][0-9])
 		cpu=hppa1.0
@@ -769,38 +766,38 @@
 		vendor=hp
 		;;
 	i*86v32)
-		cpu=$(echo "$1" | sed -e 's/86.*/86/')
+		cpu=`echo "$1" | sed -e 's/86.*/86/'`
 		vendor=pc
-		basic_os=sysv32
+		os=sysv32
 		;;
 	i*86v4*)
-		cpu=$(echo "$1" | sed -e 's/86.*/86/')
+		cpu=`echo "$1" | sed -e 's/86.*/86/'`
 		vendor=pc
-		basic_os=sysv4
+		os=sysv4
 		;;
 	i*86v)
-		cpu=$(echo "$1" | sed -e 's/86.*/86/')
+		cpu=`echo "$1" | sed -e 's/86.*/86/'`
 		vendor=pc
-		basic_os=sysv
+		os=sysv
 		;;
 	i*86sol2)
-		cpu=$(echo "$1" | sed -e 's/86.*/86/')
+		cpu=`echo "$1" | sed -e 's/86.*/86/'`
 		vendor=pc
-		basic_os=solaris2
+		os=solaris2
 		;;
 	j90 | j90-cray)
 		cpu=j90
 		vendor=cray
-		basic_os=${basic_os:-unicos}
+		os=${os:-unicos}
 		;;
 	iris | iris4d)
 		cpu=mips
 		vendor=sgi
-		case $basic_os in
+		case $os in
 		    irix*)
 			;;
 		    *)
-			basic_os=irix4
+			os=irix4
 			;;
 		esac
 		;;
@@ -811,26 +808,26 @@
 	*mint | mint[0-9]* | *MiNT | *MiNT[0-9]*)
 		cpu=m68k
 		vendor=atari
-		basic_os=mint
+		os=mint
 		;;
 	news-3600 | risc-news)
 		cpu=mips
 		vendor=sony
-		basic_os=newsos
+		os=newsos
 		;;
 	next | m*-next)
 		cpu=m68k
 		vendor=next
-		case $basic_os in
+		case $os in
 		    openstep*)
 		        ;;
 		    nextstep*)
 			;;
 		    ns2*)
-		      basic_os=nextstep2
+		      os=nextstep2
 			;;
 		    *)
-		      basic_os=nextstep3
+		      os=nextstep3
 			;;
 		esac
 		;;
@@ -841,12 +838,12 @@
 	op50n-* | op60c-*)
 		cpu=hppa1.1
 		vendor=oki
-		basic_os=proelf
+		os=proelf
 		;;
 	pa-hitachi)
 		cpu=hppa1.1
 		vendor=hitachi
-		basic_os=hiuxwe2
+		os=hiuxwe2
 		;;
 	pbd)
 		cpu=sparc
@@ -883,12 +880,12 @@
 	sde)
 		cpu=mipsisa32
 		vendor=sde
-		basic_os=${basic_os:-elf}
+		os=${os:-elf}
 		;;
 	simso-wrs)
 		cpu=sparclite
 		vendor=wrs
-		basic_os=vxworks
+		os=vxworks
 		;;
 	tower | tower-32)
 		cpu=m68k
@@ -905,7 +902,7 @@
 	w89k-*)
 		cpu=hppa1.1
 		vendor=winbond
-		basic_os=proelf
+		os=proelf
 		;;
 	none)
 		cpu=none
@@ -917,7 +914,7 @@
 		;;
 	leon-*|leon[3-9]-*)
 		cpu=sparc
-		vendor=$(echo "$basic_machine" | sed 's/-.*//')
+		vendor=`echo "$basic_machine" | sed 's/-.*//'`
 		;;
 
 	*-*)
@@ -958,11 +955,11 @@
 	# some cases the only manufacturer, in others, it is the most popular.
 	craynv-unknown)
 		vendor=cray
-		basic_os=${basic_os:-unicosmp}
+		os=${os:-unicosmp}
 		;;
 	c90-unknown | c90-cray)
 		vendor=cray
-		basic_os=${Basic_os:-unicos}
+		os=${os:-unicos}
 		;;
 	fx80-unknown)
 		vendor=alliant
@@ -1006,7 +1003,7 @@
 	dpx20-unknown | dpx20-bull)
 		cpu=rs6000
 		vendor=bull
-		basic_os=${basic_os:-bosx}
+		os=${os:-bosx}
 		;;
 
 	# Here we normalize CPU types irrespective of the vendor
@@ -1015,7 +1012,7 @@
 		;;
 	blackfin-*)
 		cpu=bfin
-		basic_os=linux
+		os=linux
 		;;
 	c54x-*)
 		cpu=tic54x
@@ -1028,7 +1025,7 @@
 		;;
 	e500v[12]-*)
 		cpu=powerpc
-		basic_os=${basic_os}"spe"
+		os=$os"spe"
 		;;
 	mips3*-*)
 		cpu=mips64
@@ -1038,7 +1035,7 @@
 		;;
 	m68knommu-*)
 		cpu=m68k
-		basic_os=linux
+		os=linux
 		;;
 	m9s12z-* | m68hcs12z-* | hcs12z-* | s12z-*)
 		cpu=s12z
@@ -1048,7 +1045,7 @@
 		;;
 	parisc-*)
 		cpu=hppa
-		basic_os=linux
+		os=linux
 		;;
 	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
 		cpu=i586
@@ -1084,7 +1081,7 @@
 		cpu=mipsisa64sb1el
 		;;
 	sh5e[lb]-*)
-		cpu=$(echo "$cpu" | sed 's/^\(sh.\)e\(.\)$/\1\2e/')
+		cpu=`echo "$cpu" | sed 's/^\(sh.\)e\(.\)$/\1\2e/'`
 		;;
 	spur-*)
 		cpu=spur
@@ -1102,16 +1099,13 @@
 		cpu=x86_64
 		;;
 	xscale-* | xscalee[bl]-*)
-		cpu=$(echo "$cpu" | sed 's/^xscale/arm/')
-		;;
-	arm64-*)
-		cpu=aarch64
+		cpu=`echo "$cpu" | sed 's/^xscale/arm/'`
 		;;
 
 	# Recognize the canonical CPU Types that limit and/or modify the
 	# company names they are paired with.
 	cr16-*)
-		basic_os=${basic_os:-elf}
+		os=${os:-elf}
 		;;
 	crisv32-* | etraxfs*-*)
 		cpu=crisv32
@@ -1122,7 +1116,7 @@
 		vendor=axis
 		;;
 	crx-*)
-		basic_os=${basic_os:-elf}
+		os=${os:-elf}
 		;;
 	neo-tandem)
 		cpu=neo
@@ -1144,12 +1138,16 @@
 		cpu=nsx
 		vendor=tandem
 		;;
-	mipsallegrexel-sony)
-		cpu=mipsallegrexel
-		vendor=sony
+	s390-*)
+		cpu=s390
+		vendor=ibm
+		;;
+	s390x-*)
+		cpu=s390x
+		vendor=ibm
 		;;
 	tile*-*)
-		basic_os=${basic_os:-linux-gnu}
+		os=${os:-linux-gnu}
 		;;
 
 	*)
@@ -1166,7 +1164,7 @@
 			| am33_2.0 \
 			| amdgcn \
 			| arc | arceb \
-			| arm | arm[lb]e | arme[lb] | armv* \
+			| arm  | arm[lb]e | arme[lb] | armv* \
 			| avr | avr32 \
 			| asmjs \
 			| ba \
@@ -1231,7 +1229,6 @@
 			| pyramid \
 			| riscv | riscv32 | riscv64 \
 			| rl78 | romp | rs6000 | rx \
-			| s390 | s390x \
 			| score \
 			| sh | shl \
 			| sh[1234] | sh[24]a | sh[24]ae[lb] | sh[23]e | she[lb] | sh[lb]e \
@@ -1278,47 +1275,8 @@
 
 # Decode manufacturer-specific aliases for certain operating systems.
 
-if test x$basic_os != x
+if [ x$os != x ]
 then
-
-# First recognize some ad-hoc caes, or perhaps split kernel-os, or else just
-# set os.
-case $basic_os in
-	gnu/linux*)
-		kernel=linux
-		os=$(echo $basic_os | sed -e 's|gnu/linux|gnu|')
-		;;
-	os2-emx)
-		kernel=os2
-		os=$(echo $basic_os | sed -e 's|os2-emx|emx|')
-		;;
-	nto-qnx*)
-		kernel=nto
-		os=$(echo $basic_os | sed -e 's|nto-qnx|qnx|')
-		;;
-	*-*)
-		# shellcheck disable=SC2162
-		IFS="-" read kernel os <<EOF
-$basic_os
-EOF
-		;;
-	# Default OS when just kernel was specified
-	nto*)
-		kernel=nto
-		os=$(echo $basic_os | sed -e 's|nto|qnx|')
-		;;
-	linux*)
-		kernel=linux
-		os=$(echo $basic_os | sed -e 's|linux|gnu|')
-		;;
-	*)
-		kernel=
-		os=$basic_os
-		;;
-esac
-
-# Now, normalize the OS (knowing we just have one component, it's not a kernel,
-# etc.)
 case $os in
 	# First match some system type aliases that might get confused
 	# with valid system types.
@@ -1330,7 +1288,7 @@
 		os=cnk
 		;;
 	solaris1 | solaris1.*)
-		os=$(echo $os | sed -e 's|solaris1|sunos4|')
+		os=`echo $os | sed -e 's|solaris1|sunos4|'`
 		;;
 	solaris)
 		os=solaris2
@@ -1338,6 +1296,9 @@
 	unixware*)
 		os=sysv4.2uw
 		;;
+	gnu/linux*)
+		os=`echo $os | sed -e 's|gnu/linux|linux|'`
+		;;
 	# es1800 is here to avoid being matched by es* (a different OS)
 	es1800*)
 		os=ose
@@ -1359,9 +1320,12 @@
 		os=sco3.2v4
 		;;
 	sco3.2.[4-9]*)
-		os=$(echo $os | sed -e 's/sco3.2./sco3.2v/')
+		os=`echo $os | sed -e 's/sco3.2./sco3.2v/'`
 		;;
-	sco*v* | scout)
+	sco3.2v[4-9]* | sco5v6*)
+		# Don't forget version if it is 3.2v4 or newer.
+		;;
+	scout)
 		# Don't match below
 		;;
 	sco*)
@@ -1370,26 +1334,79 @@
 	psos*)
 		os=psos
 		;;
+	# Now accept the basic system types.
+	# The portable systems comes first.
+	# Each alternative MUST end in a * to match a version number.
+	# sysv* is not here because it comes later, after sysvr4.
+	gnu* | bsd* | mach* | minix* | genix* | ultrix* | irix* \
+	     | *vms* | esix* | aix* | cnk* | sunos | sunos[34]*\
+	     | hpux* | unos* | osf* | luna* | dgux* | auroraux* | solaris* \
+	     | sym* | kopensolaris* | plan9* \
+	     | amigaos* | amigados* | msdos* | newsos* | unicos* | aof* \
+	     | aos* | aros* | cloudabi* | sortix* | twizzler* \
+	     | nindy* | vxsim* | vxworks* | ebmon* | hms* | mvs* \
+	     | clix* | riscos* | uniplus* | iris* | isc* | rtu* | xenix* \
+	     | knetbsd* | mirbsd* | netbsd* \
+	     | bitrig* | openbsd* | solidbsd* | libertybsd* | os108* \
+	     | ekkobsd* | kfreebsd* | freebsd* | riscix* | lynxos* \
+	     | bosx* | nextstep* | cxux* | aout* | elf* | oabi* \
+	     | ptx* | coff* | ecoff* | winnt* | domain* | vsta* \
+	     | udi* | eabi* | lites* | ieee* | go32* | aux* | hcos* \
+	     | chorusrdb* | cegcc* | glidix* \
+	     | cygwin* | msys* | pe* | moss* | proelf* | rtems* \
+	     | midipix* | mingw32* | mingw64* | linux-gnu* | linux-android* \
+	     | linux-newlib* | linux-musl* | linux-uclibc* \
+	     | uxpv* | beos* | mpeix* | udk* | moxiebox* \
+	     | interix* | uwin* | mks* | rhapsody* | darwin* \
+	     | openstep* | oskit* | conix* | pw32* | nonstopux* \
+	     | storm-chaos* | tops10* | tenex* | tops20* | its* \
+	     | os2* | vos* | palmos* | uclinux* | nucleus* \
+	     | morphos* | superux* | rtmk* | windiss* \
+	     | powermax* | dnix* | nx6 | nx7 | sei* | dragonfly* \
+	     | skyos* | haiku* | rdos* | toppers* | drops* | es* \
+	     | onefs* | tirtos* | phoenix* | fuchsia* | redox* | bme* \
+	     | midnightbsd* | amdhsa* | unleashed* | emscripten* | wasi* \
+	     | nsk* | powerunix)
+	# Remember, each alternative MUST END IN *, to match a version number.
+		;;
 	qnx*)
-		os=qnx
+		case $cpu in
+		    x86 | i*86)
+			;;
+		    *)
+			os=nto-$os
+			;;
+		esac
 		;;
 	hiux*)
 		os=hiuxwe2
 		;;
+	nto-qnx*)
+		;;
+	nto*)
+		os=`echo $os | sed -e 's|nto|nto-qnx|'`
+		;;
+	sim | xray | os68k* | v88r* \
+	    | windows* | osx | abug | netware* | os9* \
+	    | macos* | mpw* | magic* | mmixware* | mon960* | lnews*)
+		;;
+	linux-dietlibc)
+		os=linux-dietlibc
+		;;
+	linux*)
+		os=`echo $os | sed -e 's|linux|linux|'`
+		;;
 	lynx*178)
 		os=lynxos178
 		;;
 	lynx*5)
 		os=lynxos5
 		;;
-	lynxos*)
-		# don't get caught up in next wildcard
-		;;
 	lynx*)
 		os=lynxos
 		;;
-	mac[0-9]*)
-		os=$(echo "$os" | sed -e 's|mac|macos|')
+	mac*)
+		os=`echo "$os" | sed -e 's|mac|macos|'`
 		;;
 	opened*)
 		os=openedition
@@ -1398,10 +1415,10 @@
 		os=os400
 		;;
 	sunos5*)
-		os=$(echo "$os" | sed -e 's|sunos5|solaris2|')
+		os=`echo "$os" | sed -e 's|sunos5|solaris2|'`
 		;;
 	sunos6*)
-		os=$(echo "$os" | sed -e 's|sunos6|solaris3|')
+		os=`echo "$os" | sed -e 's|sunos6|solaris3|'`
 		;;
 	wince*)
 		os=wince
@@ -1435,7 +1452,7 @@
 		;;
 	# Preserve the version number of sinix5.
 	sinix5.*)
-		os=$(echo $os | sed -e 's|sinix|sysv|')
+		os=`echo $os | sed -e 's|sinix|sysv|'`
 		;;
 	sinix*)
 		os=sysv4
@@ -1458,12 +1475,18 @@
 	sysvr4)
 		os=sysv4
 		;;
+	# This must come after sysvr4.
+	sysv*)
+		;;
 	ose*)
 		os=ose
 		;;
 	*mint | mint[0-9]* | *MiNT | MiNT[0-9]*)
 		os=mint
 		;;
+	zvmoe)
+		os=zvmoe
+		;;
 	dicos*)
 		os=dicos
 		;;
@@ -1480,11 +1503,19 @@
 			;;
 		esac
 		;;
+	nacl*)
+		;;
+	ios)
+		;;
+	none)
+		;;
+	*-eabi)
+		;;
 	*)
-		# No normalization, but not necessarily accepted, that comes below.
+		echo Invalid configuration \`"$1"\': system \`"$os"\' not recognized 1>&2
+		exit 1
 		;;
 esac
-
 else
 
 # Here we handle the default operating systems that come with various machines.
@@ -1497,7 +1528,6 @@
 # will signal an error saying that MANUFACTURER isn't an operating
 # system, and we'll never get to this point.
 
-kernel=
 case $cpu-$vendor in
 	score-*)
 		os=elf
@@ -1509,8 +1539,7 @@
 		os=riscix1.2
 		;;
 	arm*-rebel)
-		kernel=linux
-		os=gnu
+		os=linux
 		;;
 	arm*-semi)
 		os=aout
@@ -1676,173 +1705,84 @@
 		os=none
 		;;
 esac
-
 fi
 
-# Now, validate our (potentially fixed-up) OS.
-case $os in
-	# Sometimes we do "kernel-abi", so those need to count as OSes.
-	musl* | newlib* | uclibc*)
-		;;
-	# Likewise for "kernel-libc"
-	eabi | eabihf | gnueabi | gnueabihf)
-		;;
-	# Now accept the basic system types.
-	# The portable systems comes first.
-	# Each alternative MUST end in a * to match a version number.
-	gnu* | android* | bsd* | mach* | minix* | genix* | ultrix* | irix* \
-	     | *vms* | esix* | aix* | cnk* | sunos | sunos[34]* \
-	     | hpux* | unos* | osf* | luna* | dgux* | auroraux* | solaris* \
-	     | sym* |  plan9* | psp* | sim* | xray* | os68k* | v88r* \
-	     | hiux* | abug | nacl* | netware* | windows* \
-	     | os9* | macos* | osx* | ios* \
-	     | mpw* | magic* | mmixware* | mon960* | lnews* \
-	     | amigaos* | amigados* | msdos* | newsos* | unicos* | aof* \
-	     | aos* | aros* | cloudabi* | sortix* | twizzler* \
-	     | nindy* | vxsim* | vxworks* | ebmon* | hms* | mvs* \
-	     | clix* | riscos* | uniplus* | iris* | isc* | rtu* | xenix* \
-	     | mirbsd* | netbsd* | dicos* | openedition* | ose* \
-	     | bitrig* | openbsd* | solidbsd* | libertybsd* | os108* \
-	     | ekkobsd* | freebsd* | riscix* | lynxos* | os400* \
-	     | bosx* | nextstep* | cxux* | aout* | elf* | oabi* \
-	     | ptx* | coff* | ecoff* | winnt* | domain* | vsta* \
-	     | udi* | lites* | ieee* | go32* | aux* | hcos* \
-	     | chorusrdb* | cegcc* | glidix* \
-	     | cygwin* | msys* | pe* | moss* | proelf* | rtems* \
-	     | midipix* | mingw32* | mingw64* | mint* \
-	     | uxpv* | beos* | mpeix* | udk* | moxiebox* \
-	     | interix* | uwin* | mks* | rhapsody* | darwin* \
-	     | openstep* | oskit* | conix* | pw32* | nonstopux* \
-	     | storm-chaos* | tops10* | tenex* | tops20* | its* \
-	     | os2* | vos* | palmos* | uclinux* | nucleus* | morphos* \
-	     | scout* | superux* | sysv* | rtmk* | tpf* | windiss* \
-	     | powermax* | dnix* | nx6 | nx7 | sei* | dragonfly* \
-	     | skyos* | haiku* | rdos* | toppers* | drops* | es* \
-	     | onefs* | tirtos* | phoenix* | fuchsia* | redox* | bme* \
-	     | midnightbsd* | amdhsa* | unleashed* | emscripten* | wasi* \
-	     | nsk* | powerunix* | genode* | zvmoe* | qnx* | emx*)
-		;;
-	# This one is extra strict with allowed versions
-	sco3.2v2 | sco3.2v[4-9]* | sco5v6*)
-		# Don't forget version if it is 3.2v4 or newer.
-		;;
-	none)
-		;;
-	*)
-		echo Invalid configuration \`"$1"\': OS \`"$os"\' not recognized 1>&2
-		exit 1
-		;;
-esac
-
-# As a final step for OS-related things, validate the OS-kernel combination
-# (given a valid OS), if there is a kernel.
-case $kernel-$os in
-	linux-gnu* | linux-dietlibc* | linux-android* | linux-newlib* | linux-musl* | linux-uclibc* )
-		;;
-	uclinux-uclibc* )
-		;;
-	-dietlibc* | -newlib* | -musl* | -uclibc* )
-		# These are just libc implementations, not actual OSes, and thus
-		# require a kernel.
-		echo "Invalid configuration \`$1': libc \`$os' needs explicit kernel." 1>&2
-		exit 1
-		;;
-	kfreebsd*-gnu* | kopensolaris*-gnu*)
-		;;
-	nto-qnx*)
-		;;
-	os2-emx)
-		;;
-	*-eabi* | *-gnueabi*)
-		;;
-	-*)
-		# Blank kernel with real OS is always fine.
-		;;
-	*-*)
-		echo "Invalid configuration \`$1': Kernel \`$kernel' not known to work with OS \`$os'." 1>&2
-		exit 1
-		;;
-esac
-
 # Here we handle the case where we know the os, and the CPU type, but not the
 # manufacturer.  We pick the logical manufacturer.
 case $vendor in
 	unknown)
-		case $cpu-$os in
-			*-riscix*)
+		case $os in
+			riscix*)
 				vendor=acorn
 				;;
-			*-sunos*)
+			sunos*)
 				vendor=sun
 				;;
-			*-cnk* | *-aix*)
+			cnk*|-aix*)
 				vendor=ibm
 				;;
-			*-beos*)
+			beos*)
 				vendor=be
 				;;
-			*-hpux*)
+			hpux*)
 				vendor=hp
 				;;
-			*-mpeix*)
+			mpeix*)
 				vendor=hp
 				;;
-			*-hiux*)
+			hiux*)
 				vendor=hitachi
 				;;
-			*-unos*)
+			unos*)
 				vendor=crds
 				;;
-			*-dgux*)
+			dgux*)
 				vendor=dg
 				;;
-			*-luna*)
+			luna*)
 				vendor=omron
 				;;
-			*-genix*)
+			genix*)
 				vendor=ns
 				;;
-			*-clix*)
+			clix*)
 				vendor=intergraph
 				;;
-			*-mvs* | *-opened*)
-				vendor=ibm
-				;;
-			*-os400*)
+			mvs* | opened*)
 				vendor=ibm
 				;;
-			s390-* | s390x-*)
+			os400*)
 				vendor=ibm
 				;;
-			*-ptx*)
+			ptx*)
 				vendor=sequent
 				;;
-			*-tpf*)
+			tpf*)
 				vendor=ibm
 				;;
-			*-vxsim* | *-vxworks* | *-windiss*)
+			vxsim* | vxworks* | windiss*)
 				vendor=wrs
 				;;
-			*-aux*)
+			aux*)
 				vendor=apple
 				;;
-			*-hms*)
+			hms*)
 				vendor=hitachi
 				;;
-			*-mpw* | *-macos*)
+			mpw* | macos*)
 				vendor=apple
 				;;
-			*-*mint | *-mint[0-9]* | *-*MiNT | *-MiNT[0-9]*)
+			*mint | mint[0-9]* | *MiNT | MiNT[0-9]*)
 				vendor=atari
 				;;
-			*-vos*)
+			vos*)
 				vendor=stratus
 				;;
 		esac
 		;;
 esac
 
-echo "$cpu-$vendor-${kernel:+$kernel-}$os"
+echo "$cpu-$vendor-$os"
 exit
 
 # Local variables:
