#!/bin/bash

execute_sed_harfbuzz () {
#******************************************************************
# remove "exit 1" code and add harfbuzz headers to SlackBuild
#******************************************************************
if [ ! -f "$SLACKSRC"/l/harfbuzz/harfbuzz.SlackBuild.old ]; then
	cp -v "$SLACKSRC"/l/harfbuzz/harfbuzz.SlackBuild "$SLACKSRC"/l/harfbuzz/harfbuzz.SlackBuild.old
	(
		cd "$SLACKSRC"/l/harfbuzz || exit 1
		# shellcheck disable=SC2016
		sed -i -e 's/\"\${NINJA:=ninja}\"\ $NUMJOBS || exit 1/\"\${NINJA:=ninja}\"\ $NUMJOBS/' harfbuzz.SlackBuild
		# shellcheck disable=SC2016
		sed -i -e 's/DESTDIR=$PKG $NINJA install || exit 1/DESTDIR=$PKG $NINJA install || exit 1/' harfbuzz.SlackBuild
	)
fi
}
execute_sed_harfbuzz
