diff -aurN xdm-1.1.11/xdm/genauth.c xdm-1.1.11-mod/xdm/genauth.c
--- xdm-1.1.11/xdm/genauth.c	2011-09-25 09:35:47.000000000 +0200
+++ xdm-1.1.11-mod/xdm/genauth.c	2022-08-31 07:59:00.763672341 +0200
@@ -40,6 +40,14 @@
 
 #include <errno.h>
 
+#ifdef HAVE_ARC4RANDOM
+# ifdef __linux__
+#  include <bsd/stdlib.h>
+# else
+#  include <stdlib.h>
+# endif
+#endif
+
 #include <time.h>
 #define Time_t time_t
 
